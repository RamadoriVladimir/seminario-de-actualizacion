<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Custom Element Example</title>
</head>
<body>
</body>

<script>
	class FetchAPIRequest extends HTMLElement {
		constructor() {
			super();

			this.btn1 = document.createElement('button');
			this.outputText = document.createElement('textarea');

			this.btn1.innerText = 'Efectuar peticion';

            this.appendChild(this.btn1);
			this.appendChild(this.outputText);
		}

		onButton1Click(event) {
            fetch('https://jsonplaceholder.typicode.com/posts/1', {method: 'GET'})
            .then(response => response.json())
            .then(data => this.outputText.value = JSON.stringify(data));
		}

		connectedCallback() {
			this.btn1.onclick = this.onButton1Click.bind(this);
		}

        disconnectedCallback() {
            this.btn1.onclick = null;
        }
    }

	customElements.define('x-request', FetchAPIRequest);

	function main() {
        let xrequest = new FetchAPIRequest();
		document.body.appendChild(xrequest);
	}

	window.onload = main;
</script>
</html>
